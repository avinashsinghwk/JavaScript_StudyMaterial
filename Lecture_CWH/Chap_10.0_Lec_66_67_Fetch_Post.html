<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API & Post Request</title>
</head>
<style>
    #box img {
        width: 400px;
        height: 400px;
        border-radius: 20px;
    }
</style>

<body>
    <h2>In this lecture i will be learning about Fetch API and Post Request</h2>
    <div id="box"></div>
</body>
<script>
    // ----------- Lecture - 66 (Fetch API) ----------------

    let p = fetch("https://dog.ceo/api/breeds/image/random")

    p.then((response) => {
        // console.log(response)
        // console.log(response.status)
        // console.log(response.ok)
        // console.log(response.headers)  // response headers

        // return response.text()
        return response.json()
    }).then((response) => {
        document.getElementById("box").innerHTML = `<img src="${response.message}">`
        console.log(response)
    })

    // fetch is 2 step process, 1st it returns a promise object (contains also -> status or ok) and we return this object and then this promise will be resolved

    // --------- Request headers ---------

    // let p1 = fetch("https://jfhiaujfa", {   // this is a way to send request headers, we attach it as second argument of fetch
    //     headers: {
    //         Authentication: "send"
    //     }
    // });

    // ----------------- Lecture - 67 (Post Request) -----------------

    // let options = {
    //     method: "POST",
    //     headers: {
    //         "content-type": "application/json"
    //     },
    //     body: JSON.stringify({
    //         title: 'Avinash',
    //         body: 'Hello',
    //         userId: 101,
    //     })
    // }

    // fetch('https://jsonplaceholder.typicode.com/posts', options)
    //     .then((response) => response.json())
    //     .then((json) => console.log(json));

    // -------- using async function ---------

    // const createTodo = async (todo) => {
    //     let options = {
    //         method: "POST",
    //         headers: {
    //             "content-type": "application/json"
    //         },
    //         body: JSON.stringify(todo)
    //     }
    //     let prom = fetch('https://jsonplaceholder.typicode.com/posts', options)
    //     let response = await prom
    //     return response.json()
    // }

    // const getTodo = async (id) => {
    //     let response = await fetch('https://jsonplaceholder.typicode.com/posts/' + id)
    //     let r = await response.json()
    //     return r
    // }

    // const mainFunc = async () => {
    //     let todo = {
    //         title: 'Avinash',
    //         body: 'Hello',
    //         userId: 101,
    //     }
    //     let todoRes = await createTodo(todo)
    //     console.log(todoRes)
    //     console.log(await getTodo(10))
    // }

    // mainFunc()





</script>

</html>